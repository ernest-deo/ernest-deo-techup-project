<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HoopHub - NBA Schedule</title>
    <link rel="stylesheet" href="styles/styles.css">
    <link rel="stylesheet" href="styles/nba_schedule-styles.css">
</head>
<body>
    <div id="header-container"></div>

    <div id="top-scroll" class="scroll-container"></div>
    <div id="middle-scroll" class="scroll-container"></div>
    <div id="table-container">
        <!-- The table will be inserted here -->
    </div>

    <footer>
        <p>&copy; 2024 HoopHub. All rights reserved.</p>
        <p class="disclaimer-text">Disclaimer: This website is created for learning purposes only. The information here should not be considered professional advice. Please note that we make no guarantees regarding the accuracy, completeness, or reliability of the contents of this website. Any actions you take based on the contents of this website are at your own risk. We are not liable for any losses or damages incurred from the use of this website.</p>
    </footer>
    <script>
        // Load the header
        fetch('header.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('header-container').innerHTML = data;
            });

        // Load the NBA schedule table
        fetch('nba_schedule_table.html')
            .then(response => response.text())
            .then(data => {
                const parser = new DOMParser();
                const doc = parser.parseFromString(data, 'text/html');
                const table = doc.querySelector('table');
                document.getElementById('table-container').appendChild(table);

                // Apply additional classes and styles
                applyAdditionalStyles();

                // Add scroll synchronization
                addScrollSynchronization();
            });

        const teamAbbreviations = {
            'ATL': 'Atlanta Hawks',
            'BOS': 'Boston Celtics',
            'BKN': 'Brooklyn Nets',
            'CHA': 'Charlotte Hornets',
            'CHI': 'Chicago Bulls',
            'CLE': 'Cleveland Cavaliers',
            'DAL': 'Dallas Mavericks',
            'DEN': 'Denver Nuggets',
            'DET': 'Detroit Pistons',
            'GSW': 'Golden State Warriors',
            'HOU': 'Houston Rockets',
            'IND': 'Indiana Pacers',
            'LAC': 'Los Angeles Clippers',
            'LAL': 'Los Angeles Lakers',
            'MEM': 'Memphis Grizzlies',
            'MIA': 'Miami Heat',
            'MIL': 'Milwaukee Bucks',
            'MIN': 'Minnesota Timberwolves',
            'NOP': 'New Orleans Pelicans',
            'NYK': 'New York Knicks',
            'OKC': 'Oklahoma City Thunder',
            'ORL': 'Orlando Magic',
            'PHI': 'Philadelphia 76ers',
            'PHX': 'Phoenix Suns',
            'POR': 'Portland Trail Blazers',
            'SAC': 'Sacramento Kings',
            'SAS': 'San Antonio Spurs',
            'TOR': 'Toronto Raptors',
            'UTA': 'Utah Jazz',
            'WAS': 'Washington Wizards'
        };

        function applyAdditionalStyles() {
            const table = document.querySelector('#table-container table');
            if (!table) return;

            table.id = 'sheet-data';
            Array.from(table.querySelectorAll('td, th')).forEach((cell, index) => {
                cell.classList.add('cell');

                const rowIndex = cell.parentElement.rowIndex;
                const colIndex = cell.cellIndex;

                if (rowIndex < 3) {
                    cell.classList.add('sticky-row', `sticky-row-${rowIndex + 1}`);
                }
                if (colIndex === 0) {
                    cell.classList.add('sticky-col');
                }
                if (rowIndex < 3 && colIndex === 0) {
                    cell.classList.add('sticky-corner');
                }

                // Add team logos
                if (rowIndex > 2 && colIndex === 0) {
                    const teamAbbr = cell.textContent.trim();
                    if (teamAbbreviations[teamAbbr]) {
                        const teamName = teamAbbreviations[teamAbbr];
                        const imgSrc = `logos/${teamAbbr.toUpperCase()}.png`; // Use Uppercase for file names
                        const img = new Image();
                        img.onload = () => {
                            cell.innerHTML = `<img src="${imgSrc}" alt="${teamName}" class="team-logo"> ${teamName}`;
                        };
                        img.onerror = () => {
                            console.error(`Failed to load image for ${teamName}`);
                            cell.textContent = teamName; // Fallback to just the team name
                        };
                        img.src = imgSrc;
                    }
                }
            });

            // Apply sticky styling
            applyStickyStyling();
        }

        function applyStickyStyling() {
            const stickyElements = document.querySelectorAll('.sticky-row, .sticky-col, .sticky-corner');
            stickyElements.forEach(element => {
                if (element.style.backgroundColor) {
                    element.style.backgroundColor = element.style.backgroundColor;
                }
            });
        }

        // Add hover effect
        document.addEventListener('mouseover', function(e) {
            if (e.target.tagName === 'TD') {
                e.target.classList.add('highlight');
            }
        });

        document.addEventListener('mouseout', function(e) {
            if (e.target.tagName === 'TD') {
                e.target.classList.remove('highlight');
            }
        });

        function addScrollSynchronization() {
            const tableContainer = document.getElementById('table-container');
            const topScroll = document.getElementById('top-scroll');
            const middleScroll = document.getElementById('middle-scroll');

            // Create dummy content for scroll containers
            const scrollContent = document.createElement('div');
            scrollContent.style.width = tableContainer.scrollWidth + 'px';
            scrollContent.style.height = '1px';

            topScroll.appendChild(scrollContent.cloneNode(true));
            middleScroll.appendChild(scrollContent.cloneNode(true));

            // Synchronize scrolling
            [topScroll, middleScroll, tableContainer].forEach(container => {
                container.addEventListener('scroll', () => {
                    const scrollLeft = container.scrollLeft;
                    [topScroll, middleScroll, tableContainer].forEach(c => {
                        if (c !== container) {
                            c.scrollLeft = scrollLeft;
                        }
                    });
                });
            });
        }
    </script>
</body>
</html>